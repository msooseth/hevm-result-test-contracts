; Test examples
(set-logic QF_BV)
(define-fun clz256 ((x (_ BitVec 256))) (_ BitVec 256)
  (let ((x128 (ite (bvuge x #x0000000000000000000000000000000100000000000000000000000000000000)
                   (bvlshr x (_ bv128 256)) x))
        (n128 (ite (bvuge x #x0000000000000000000000000000000100000000000000000000000000000000)
                   (_ bv0 256) (_ bv128 256))))
  (let ((x64 (ite (bvuge x128 #x0000000000000000000000000000000000000000000000010000000000000000)
                  (bvlshr x128 (_ bv64 256)) x128))
        (n64 (ite (bvuge x128 #x0000000000000000000000000000000000000000000000010000000000000000)
                  n128 (bvadd n128 (_ bv64 256)))))
  (let ((x32 (ite (bvuge x64 #x0000000000000000000000000000000000000000000000000000000100000000)
                  (bvlshr x64 (_ bv32 256)) x64))
        (n32 (ite (bvuge x64 #x0000000000000000000000000000000000000000000000000000000100000000)
                  n64 (bvadd n64 (_ bv32 256)))))
  (let ((x16 (ite (bvuge x32 #x0000000000000000000000000000000000000000000000000000000000010000)
                  (bvlshr x32 (_ bv16 256)) x32))
        (n16 (ite (bvuge x32 #x0000000000000000000000000000000000000000000000000000000000010000)
                  n32 (bvadd n32 (_ bv16 256)))))
  (let ((x8 (ite (bvuge x16 #x0000000000000000000000000000000000000000000000000000000000000100)
                 (bvlshr x16 (_ bv8 256)) x16))
        (n8 (ite (bvuge x16 #x0000000000000000000000000000000000000000000000000000000000000100)
                 n16 (bvadd n16 (_ bv8 256)))))
  (let ((x4 (ite (bvuge x8 #x0000000000000000000000000000000000000000000000000000000000000010)
                 (bvlshr x8 (_ bv4 256)) x8))
        (n4 (ite (bvuge x8 #x0000000000000000000000000000000000000000000000000000000000000010)
                 n8 (bvadd n8 (_ bv4 256)))))
  (let ((x2 (ite (bvuge x4 #x0000000000000000000000000000000000000000000000000000000000000004)
                 (bvlshr x4 (_ bv2 256)) x4))
        (n2 (ite (bvuge x4 #x0000000000000000000000000000000000000000000000000000000000000004)
                 n4 (bvadd n4 (_ bv2 256)))))
  (let ((x1 (ite (bvuge x2 #x0000000000000000000000000000000000000000000000000000000000000002)
                 (bvlshr x2 (_ bv1 256)) x2))
        (n1 (ite (bvuge x2 #x0000000000000000000000000000000000000000000000000000000000000002)
                 n2 (bvadd n2 (_ bv1 256)))))
  (ite (bvuge x1 (_ bv1 256)) n1 (bvadd n1 (_ bv1 256)))
)))))))))

(declare-fun x () (_ BitVec 256))

; clz(0) = 256
(push)
(assert (not (= (clz256 (_ bv0 256)) (_ bv256 256))))
(check-sat) ; expect unsat
(pop)

; clz(1) = 255
(push)
(assert (not (= (clz256 (_ bv1 256)) (_ bv255 256))))
(check-sat) ; expect unsat
(pop)

; clz(2) = 254
(push)
(assert (not (= (clz256 (_ bv2 256)) (_ bv254 256))))
(check-sat) ; expect unsat
(pop)

; clz(0xFF) = 248
(push)
(assert (not (= (clz256 (_ bv255 256)) (_ bv248 256))))
(check-sat) ; expect unsat
(pop)

; clz(2^128) = 127
(push)
(assert (not (= (clz256 (bvshl (_ bv1 256) (_ bv128 256))) (_ bv127 256))))
(check-sat) ; expect unsat
(pop)

; clz(2^255) = 0
(push)
(assert (not (= (clz256 (bvshl (_ bv1 256) (_ bv255 256))) (_ bv0 256))))
(check-sat) ; expect unsat
(pop)

(exit)
